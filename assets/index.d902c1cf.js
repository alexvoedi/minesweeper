import{d as $,o as m,c as h,F as j,r as N,a as c,t as C,n as q,u as g,b as K,e as A,w as v,f as R,g as M,h as _,i as B,j as H,k as J,l as U}from"./vendor.6c6353ce.js";const X=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))f(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const k of i.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&f(k)}).observe(document,{childList:!0,subtree:!0});function l(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function f(a){if(a.ep)return;a.ep=!0;const i=l(a);fetch(a.href,i)}};X();var n;(function(t){t[t.Close=0]="Close",t[t.Questionmark=1]="Questionmark",t[t.Flag=2]="Flag",t[t.Open=3]="Open"})(n||(n={}));const Y={class:"grid grid-cols-3 gap-5"},Z=["onClick"],ee={class:"font-light normal-case"},te=$({emits:["init-game"],setup(t){const o=[{title:"Beginner",settings:{width:9,height:9,mines:10}},{title:"Intermediate",settings:{width:16,height:16,mines:40}},{title:"Expert",settings:{width:30,height:16,mines:99}}];return(l,f)=>(m(),h("div",Y,[(m(),h(j,null,N(o,({title:a,settings:i})=>c("button",{key:a,class:"btn btn-primary transform hover:shadow-md btn-block block h-auto py-3",onClick:k=>l.$emit("init-game",i)},[c("div",null,C(a),1),c("div",ee,C(i.width)+"x"+C(i.height)+" - "+C(i.mines)+" Mines",1)],8,Z)),64))]))}}),se={class:"stats w-full"},ne={class:"stat place-items-center place-content-center gap-x-0"},le=c("div",{class:"stat-title"},"Time",-1),ie={class:"stat-value text-center font-mono"},ae=c("div",{class:"stat-desc"},"Seconds",-1),oe={class:"stat place-items-center place-content-center gap-x-0"},re=c("div",{class:"stat-title"},"Marked",-1),ce=c("div",{class:"stat-desc"},"Mines",-1),de=$({props:{elapsedTime:{type:Number,required:!0},markedCellsCount:{type:Number,required:!0},mines:{type:Number,required:!0}},setup(t){return(o,l)=>(m(),h("div",se,[c("div",ne,[le,c("div",ie,C(t.elapsedTime.toFixed(2)),1),ae]),c("div",oe,[re,c("div",{class:q(["stat-value text-center font-mono",[t.markedCellsCount<=t.mines?"text-success":"text-error"]])},C(t.markedCellsCount),3),ce])]))}});var ue=(t,o)=>{const l=t.__vccOpts||t;for(const[f,a]of o)l[f]=a;return l};const me=["disabled"],fe={key:0,class:"text-black"},he={key:0,text:"color-red-500"},ge={key:1,text:"color-red-500"},ve={key:1,class:""},pe={key:2,class:""},Ce=$({props:{cell:{type:Object,required:!0},actions:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1},value:{type:Number,required:!0}},setup(t){return(o,l)=>(m(),h("button",{class:q(["btn btn-sm btn-square rounded-none transition-none border-gray-500",{open:t.cell.state===g(n).Open,questionmark:t.cell.state===g(n).Questionmark,flag:t.cell.state===g(n).Flag,highlight:t.cell.highlight}]),disabled:t.disabled,onMouseup:[l[0]||(l[0]=v(f=>t.actions.openCell(t.cell),["left","prevent"])),l[2]||(l[2]=v(f=>t.actions.openSurroundingCells(t.cell),["middle","prevent"]))],onMousedown:l[1]||(l[1]=v(f=>t.actions.highlightSurroundingCells(t.cell),["middle","prevent"])),onContextmenu:l[3]||(l[3]=v(f=>t.actions.markCell(t.cell),["prevent"]))},[t.cell.state===g(n).Open?(m(),h("span",fe,[t.cell.mine?(m(),h(j,{key:0},[t.disabled?(m(),h("span",he,"\u{1F4A5}")):(m(),h("span",ge,"\u{1F4A3}"))],64)):t.value>0?(m(),h(j,{key:1},[K(C(t.value),1)],64)):A("",!0)])):t.cell.state===g(n).Questionmark?(m(),h("span",ve,"\u2753")):t.cell.state===g(n).Flag?(m(),h("span",pe,"\u{1F6A9}")):A("",!0)],42,me))}});var ke=ue(Ce,[["__scopeId","data-v-b36e15a0"]]);const ye={class:"p-4 max-w-screen-lg mx-auto"},be={class:"grid grid-cols-1 gap-5"},we=c("div",{class:"card bg-gray-600 text-white compact shadow-lg p-5"},[c("div",{class:"card-title"},[c("h1",{class:"font-medium text-3xl"},"Minesweeper"),c("h2",{class:"font-light"},"A simple Minesweeper game")])],-1),xe={class:"mx-auto"},$e=$({setup(t){const o=R({width:9,height:9,mines:10}),l=M([]),f=M(!0),a=M(!1),i=M({id:0,start:new Date,current:new Date}),k=({width:e,height:s,mines:r})=>{Object.assign(o,{width:e,height:s,mines:r}),f.value=!0,a.value=!1,i.value.start=new Date,i.value.current=new Date,l.value=[];for(let u=0;u<e;u++)for(let d=0;d<s;d++)l.value[d*e+u]={x:u,y:d,mine:!1,highlight:!1,state:n.Close}},I=()=>{l.value.filter(s=>s.state===n.Open).length===o.width*o.height-o.mines&&(clearInterval(i.value.id),F())},Q=_(()=>({gridTemplateColumns:`repeat(${o.width}, min-content)`,gridTemplateRows:`repeat(${o.height}, min-content)`})),O=e=>{if(e.state!==n.Close)return;if(e.state=n.Open,f.value&&(E(),i.value.start=new Date,i.value.id=setInterval(D,10)),e.mine){clearTimeout(i.value.id),F(),a.value=!0;return}const s=b(e);s.filter(u=>u.mine).length===0&&s.forEach(u=>O(u)),I()},D=()=>i.value.current=new Date,E=()=>{f.value=!1;const e=l.value.filter(r=>r.state!==n.Open);let s=0;for(;s<o.mines;){const r=e[Math.floor(Math.random()*e.length)];r.mine||(r.mine=!0,s++)}},F=()=>{l.value.forEach(e=>e.state=n.Open)},L=e=>{e.state!==n.Open&&(e.state===n.Close?e.state=n.Flag:e.state===n.Flag?e.state=n.Questionmark:e.state===n.Questionmark&&(e.state=n.Close))},b=e=>{const{x:s,y:r}=e,u=[];for(let d=-1;d<=1;d++)for(let y=-1;y<=1;y++)if(d!==0||y!==0){const p=T(s+d,r+y);p&&u.push(p)}return u},W=_(()=>l.value.filter(e=>e.state===n.Flag).length),V=e=>b(e).filter(u=>u.mine).length,T=(e,s)=>{if(z(e,s))return l.value[s*o.width+e]},S=e=>{b(e).filter(r=>r.state===n.Close||r.state===n.Questionmark).forEach(r=>r.highlight=!0)},z=(e,s)=>e>=0&&s>=0&&e<o.width&&s<o.height,G=e=>{if(l.value.forEach(d=>d.highlight=!1),e.state!==n.Open)return;const s=b(e),r=s.filter(d=>d.state===n.Flag),u=s.filter(d=>d.mine);if(r.length===u.length){const{x:d,y}=e;for(let p=-1;p<=1;p++)for(let w=-1;w<=1;w++){if(p===0&&w===0)continue;const x=T(d+p,y+w);x&&(x.state===n.Close||x.state===n.Questionmark)&&O(x)}}},P=_(()=>(i.value.current.getTime()-i.value.start.getTime())/1e3);return(e,s)=>(m(),h("div",ye,[c("div",be,[we,B(te,{onInitGame:k}),c("div",xe,[c("div",{class:"grid items-center justify-items-center cursor-pointer",style:H(g(Q)),onClick:s[0]||(s[0]=v(()=>{},["prevent"])),onMousedown:s[1]||(s[1]=v(()=>{},["middle","prevent"])),onMouseup:s[2]||(s[2]=v(()=>{},["middle","prevent"])),onContextmenu:s[3]||(s[3]=v(()=>{},["prevent"]))},[(m(!0),h(j,null,N(l.value,r=>(m(),J(ke,{key:r.id,cell:r,actions:{openCell:O,highlightSurroundingCells:S,openSurroundingCells:G,markCell:L},disabled:a.value,value:V(r)},null,8,["cell","actions","disabled","value"]))),128))],36)]),B(de,{elapsedTime:g(P),markedCellsCount:g(W),mines:g(o).mines},null,8,["elapsedTime","markedCellsCount","mines"])])]))}});U($e).mount("#app");
